{% extends "layout.html" %}
{% block content %}
<h2>League Members</h2>

<div class="card">
  <h3>Members</h3>
  {% if members %}
    <table class="table">
      <tr><th>Email</th><th>Role</th><th>Actions</th></tr>
      {% for m in members %}
        <tr>
          <td>{{ m.email }}</td>
          <td>{{ m.role }}</td>
          <td>
            <form method="post" action="/leagues/{{ league_id }}/members/remove" style="display:inline">
              {% csrf_token %}
              <input type="hidden" name="user_id" value="{{ m.id }}" />
              <button type="submit">Remove</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>No members.</p>
  {% endif %}
</div>

<div class="card">
  <h3>Add Member</h3>
  <form method="post" action="/leagues/{{ league_id }}/members">
    {% csrf_token %}
    <label>Email</label>
    <input type="email" name="email" required />
    <label>Role</label>
    <select name="role">
      <option value="viewer">Viewer</option>
      <option value="editor">Editor</option>
      <option value="admin">Administrator</option>
    </select>
    <button class="btn primary" type="submit">Add</button>
  </form>
  <p class="muted">Users must have an account to be added.</p>
</div>

{% endblock %}
