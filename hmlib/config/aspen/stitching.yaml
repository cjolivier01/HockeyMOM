aspen:
  # Keep the context surface area small; only the keys requested by each
  # plugin (input_keys) plus shared are threaded between trunks.
  minimal_context: true

  # Minimal video-out pipeline for stitched panoramas. We avoid cropping and
  # camera-box logic here and only normalize images into a visible uint8
  # format for encoding.
  video_out_pipeline:
    - type: HmImageColorAdjust
      # No-op by default; runtime camera color tweaks can still be wired in
      # later via shared.cam_args or game_config if desired.
    - type: HmMakeVisibleImage

  plugins:
    apply_camera:
      class: hmlib.camera.apply_camera_plugin.ApplyCameraPlugin
      depends: []
      enabled: true
      params:
        # Inline the pipeline here so this config is self-contained and
        # does not depend on GLOBAL.* references.
        video_out_pipeline:
          - type: HmImageColorAdjust
          - type: HmMakeVisibleImage

    video_out:
      class: hmlib.aspen.plugins.video_out_plugin.VideoOutPlugin
      depends: [apply_camera]
      enabled: true
      params:
        # output_video_path, skip_final_save and save_frame_dir are wired
        # in programmatically from the CLI (stitch.py) before AspenNet
        # is constructed.
        cache_size: 2
